<!doctype html>
<html lang="en">
  <head>
    <title>Worklink</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <header>
      <div class="Logo">
        <a href="#top"><img src="images/header_logo.png" alt="Logo" /></a>
      </div>

      <div class="searcher">
        <input type="text" id="search" placeholder="Find your job" />
      </div>

      <nav class="header-right">
        <span id="userInfo"></span>
        <a href="#" id="loginBtn" class="Log_in">Login</a>
        <a href="#" id="logoutBtn" class="Log_in d-none">Logout</a>
      </nav>
    </header>

    <!-- Main -->
    <main class="container">
      <!-- Filters + Reset -->
      <div class="filters-wrapper">
        <div class="filters">
          <select id="typeFilter">
            <option value="">Job type</option>
            <option value="Part-time">Part-time</option>
            <option value="Full-time">Full-time</option>
            <option value="Temporary">Temporary</option>
          </select>

          <select id="locationFilter">
            <option value="">Location</option>
            <option value="Bratislava">Bratislava</option>
            <option value="Košice">Košice</option>
            <option value="Žilina">Žilina</option>
            <option value="Trnava">Trnava</option>
          </select>

          <select id="remoteFilter">
            <option value="">Work mode</option>
            <option value="On-site">On-site</option>
            <option value="Remote">Remote</option>
          </select>

          <select id="salaryFilter">
            <option value="">Salary range</option>
            <option value="do 1000">Up to €1000</option>
            <option value="1000-1500">€1000 - €1500</option>
            <option value="nad 1500">Over €1500</option>
          </select>
        </div>

        <button id="resetFilters" class="btn btn-secondary mb-2 reset">Reset Filters</button>
      </div>

      <p id="jobCount" class="text-muted mt-2"></p>
      <div class="jobs" id="jobList"></div>
    </main>

    <!-- Modal: Apply Form -->
    <div class="modal fade" id="applyModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content p-3">
          <h5 class="modal-title">Job Application</h5>
          <textarea
            id="motivation"
            class="form-control my-2"
            placeholder="Why should we choose you?"
          ></textarea>
          <button class="btn btn-primary w-100">Send</button>
        </div>
      </div>
    </div>

    <!-- Modal: Login -->
    <div class="modal fade" id="loginModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content p-3">
          <h5 class="modal-title">Login</h5>
          <input
            type="text"
            id="firstName"
            class="form-control my-2"
            placeholder="First name"
          />
          <input
            type="text"
            id="lastName"
            class="form-control my-2"
            placeholder="Last name"
          />
          <input
            type="date"
            id="birthDate"
            class="form-control my-2"
            placeholder="Date of birth"
          />
          <button class="btn btn-primary w-100">Login</button>
        </div>
      </div>
    </div>

    <script>
      // JOB DATA
      const jobs = [
        {title:'Barista – Weekend Part-time',company:'Café Bratislava',location:'Bratislava',type:'Part-time',salary:800,mode:'On-site',description:'Preparing coffee and serving customers during weekends.'},
        {title:'Junior Frontend Developer',company:'Webify s.r.o.',location:'Remote',type:'Full-time',salary:1300,mode:'Remote',description:'Developing web applications using React. Remote work.'},
        {title:'Courier – Košice',company:'Fast Delivery',location:'Košice',type:'Part-time',salary:900,mode:'On-site',description:'Delivering orders across Košice. Flexible hours.'},
        {title:'Shop Assistant (Shoes)',company:'TrendyShoes',location:'Žilina',type:'Full-time',salary:1100,mode:'On-site',description:'Customer service, product sales and stocking shelves.'},
        {title:'Administrative Assistant',company:'FinPro s.r.o.',location:'Bratislava',type:'Full-time',salary:1200,mode:'On-site',description:'Administrative office support, records and communication.'},
        {title:'Graphic Designer – Freelancer',company:'DesignPro',location:'Trnava',type:'Temporary',salary:1400,mode:'Remote',description:'Designing banners, visuals and online ads for clients.'},
        {title:'IT Support Specialist',company:'TechSolutions',location:'Bratislava',type:'Full-time',salary:1500,mode:'Hybrid',description:'Providing technical support and troubleshooting for company employees.'},
        {title:'Warehouse Worker',company:'LogiCorp',location:'Trnava',type:'Full-time',salary:1000,mode:'On-site',description:'Handling goods, preparing shipments and managing stock.'},
        {title:'Content Writer (English)',company:'MediaHouse',location:'Remote',type:'Part-time',salary:900,mode:'Remote',description:'Creating articles and blog posts in English for online media.'},
        {title:'Customer Care Representative',company:'HelpDesk24',location:'Košice',type:'Full-time',salary:1150,mode:'Remote',description:'Communicating with customers via phone and email, solving issues efficiently.'},
        {title:'Marketing Assistant',company:'CreativePoint',location:'Žilina',type:'Temporary',salary:1300,mode:'On-site',description:'Assisting marketing team with campaigns, event planning and social media content.'},
        {title:'Electrician – Industrial Maintenance',company:'PowerTech s.r.o.',location:'Bratislava',type:'Full-time',salary:1600,mode:'On-site',description:'Maintenance and repair of industrial electrical systems and equipment.'},
        {title:'Receptionist – Hotel Riverside',company:'Hotel Riverside',location:'Trnava',type:'Full-time',salary:1100,mode:'On-site',description:'Welcoming guests, managing reservations, and providing information about hotel services.'},
        {title:'Data Analyst Intern',company:'DataVision s.r.o.',location:'Bratislava',type:'Temporary',salary:900,mode:'Hybrid',description:'Assisting data team with analysis and visualizations using Excel and Power BI.'},
        {title:'Junior Accountant',company:'EcoFinance',location:'Košice',type:'Full-time',salary:1250,mode:'On-site',description:'Processing invoices, maintaining financial records, and assisting with monthly reporting.'},
        {title:'Social Media Manager',company:'Brandify Agency',location:'Remote',type:'Full-time',salary:1400,mode:'Remote',description:'Managing social media accounts, creating engaging content and analyzing performance metrics.'},
        {title:'Maintenance Technician',company:'AutoServis Žilina',location:'Žilina',type:'Full-time',salary:1350,mode:'On-site',description:'Performing maintenance and minor repairs on company machinery and equipment.'}
      ];

      const jobList = document.getElementById('jobList');
      const filters = ['search','typeFilter','locationFilter','remoteFilter','salaryFilter'].map(id=>document.getElementById(id));

      let currentJobTitle = null;
      const appliedJobs = new Set();
      let loggedUser = null;

      // OPEN APPLY FORM
      function openForm(title){
        if(!loggedUser){
          alert('You must be logged in to send an application!');
          return;
        }
        currentJobTitle = title;
        document.querySelector('#applyModal .modal-title').textContent = 'Application for position: '+title;
        new bootstrap.Modal(document.getElementById('applyModal')).show();
      }

      // APPLY FORM SUBMIT
      document.querySelector('#applyModal button.btn-primary').addEventListener('click',()=>{
        if(!currentJobTitle) return;
        const motivation = document.getElementById('motivation').value.trim();
        if(!motivation){
          alert('Please tell us why we should choose you!');
          return;
        }
        appliedJobs.add(currentJobTitle);
        const modal = bootstrap.Modal.getInstance(document.getElementById('applyModal'));
        modal.hide();
        document.getElementById('motivation').value='';
        renderJobs();
      });

      // LOGIN MODAL
      document.getElementById('loginBtn').addEventListener('click',()=>{
        new bootstrap.Modal(document.getElementById('loginModal')).show();
      });

      // LOGIN SUBMIT
      document.querySelector('#loginModal button.btn-primary').addEventListener('click',()=>{
        const fn = document.getElementById('firstName').value.trim();
        const ln = document.getElementById('lastName').value.trim();
        const bd = document.getElementById('birthDate').value;
        if(!fn || !ln || !bd){
          alert('Please fill in all fields!');
          return;
        }
        const birth = new Date(bd);
        const today = new Date();
        let age = today.getFullYear() - birth.getFullYear();
        const m = today.getMonth() - birth.getMonth();
        if(m<0 || (m===0 && today.getDate()<birth.getDate())) age--;
        if(age<18){
          alert('You must be at least 18 years old!');
          return;
        }
        loggedUser = fn+' '+ln;
        document.getElementById('userInfo').textContent = 'Logged in: '+loggedUser;
        document.getElementById('loginBtn').classList.add('d-none');
        document.getElementById('logoutBtn').classList.remove('d-none');
        const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
        modal.hide();
      });

      document.getElementById('logoutBtn').addEventListener('click',()=>{
        loggedUser = null;
        document.getElementById('userInfo').textContent='';
        document.getElementById('loginBtn').classList.remove('d-none');
        document.getElementById('logoutBtn').classList.add('d-none');
      });

      // RESET FILTERS
      document.getElementById('resetFilters').addEventListener('click', () => {
        filters.forEach(f => f.value='');
        renderJobs();
      });

      // RENDER JOBS
      function renderJobs(){
        const search = document.getElementById('search').value.toLowerCase();
        const type = document.getElementById('typeFilter').value;
        const loc = document.getElementById('locationFilter').value;
        const mode = document.getElementById('remoteFilter').value;
        const salary = document.getElementById('salaryFilter').value;

        jobList.innerHTML='';

        const filtered = jobs
          .filter(j=>j.title.toLowerCase().includes(search))
          .filter(j=>!type||j.type===type)
          .filter(j=>!loc||j.location.includes(loc))
          .filter(j=>!mode||j.mode===mode)
          .filter(j=>{
            if(!salary) return true;
            if(salary==='do 1000') return j.salary<=1000;
            if(salary==='1000-1500') return j.salary>=1000 && j.salary<=1500;
            if(salary==='nad 1500') return j.salary>1500;
          });
          
        document.getElementById('jobCount').textContent = `Available offers: ${filtered.length}`; 

        if(filtered.length===0){
          jobList.innerHTML='<p class="no-results">No job offers match the selected filters.</p>';
          return;
        }

        filtered.forEach(j=>{
          const div=document.createElement('div');
          div.className='job';
          div.innerHTML=`
            <h3>${j.title}</h3>
            <p><strong>Company:</strong> ${j.company}</p>
            <p><strong>Location:</strong> ${j.location}</p>
            <p><strong>Type:</strong> ${j.type}</p>
            <p><strong>Salary:</strong> ${j.salary} €</p>
            <p><strong>Mode:</strong> ${j.mode}</p>
            <p>${j.description}</p>
          `;
          if(appliedJobs.has(j.title)){
            const done=document.createElement('div');
            done.className='applied-label';
            done.innerHTML='✅ Application sent';
            div.appendChild(done);
          } else {
            const btn=document.createElement('button');
            btn.className='apply-btn';
            btn.textContent='Apply now';
            btn.addEventListener('click',()=>openForm(j.title));
            div.appendChild(btn);
          }
          jobList.appendChild(div);
        });
      }

      filters.forEach(f=>f.addEventListener('input',renderJobs));
      renderJobs();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
